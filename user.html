<!-- Developed by Ben Scholer - 3/18/2017 -->

<!DOCTYPE html>
<html>
<head>

	<meta name="viewport" content="width = device-width, initial-scale = 1">
	<link rel="stylesheet" type="text/css"
		  href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
	<link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="index.css"/>
	<link rel="stylesheet" type="text/css" href="common.css">
	<title>IWMI Settings</title>
</head>


<body>

	<div class="container">

		<nav class="navbar navbar-default">

			<div class="container-fluid">

				<div class="navbar-header"><a class="navbar-brand" href="#">IWMI</a></div>

				<div id="navbar" class="navbar-collapse collapse">
					<ul class="nav navbar-nav">
						<li><a href="index.html" id="mapNav">Map</a></li>
						<li><a href="managment.html" id="managmentNav">Managment</a></li>
					</ul>
					<ul class="nav navbar-nav navbar-right">
						<li class="active"><a id="userTab" href="#"></a></li>
						<li><a id="loginNav" href="login.html" style="visibility:hidden;position: absolute;">Login</a>
						</li>
					</ul>
				</div>
			</div>
		</nav>

		<h2 id="settingsHeader">Settings</h2>

		<div class="form-group" style="width: 25%;">
			<label for="name">Name:</label>
			<input type="text" class="form-control" id="name">
		</div>
		<div class="form-group" style="width: 25%;">
			<label for="agencyType">Agency Type:</label>
			<select id="agencyType" class="form-control"></select>
		</div>
		<div class="form-group" style="width: 25%;">
			<label for="public">Publicly Availible:</label>
			<input type="checkbox" checked data-toggle="toggle" data-on="Yes" data-off="No" id="public">
		</div>

		<a href="#" class="btn btn-info btn-lg" id="logout">
			<span class="glyphicon glyphicon-log-out"></span> Log out
		</a>

	</div>

	<script src="lib/papaparse.js"></script>
	<script src="lib/markerclusterer.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
	<script>

		var locations;
		var users;
		var userLoggedIn;
		var agencyTypes = ["Cities and towns (except drinking water)", "Counties", "Drinking water",
			"Federal and regional agencies", "Non-governmental organizations", "Private sector", "State agencies",
		"Universities", "Volunteers", "Watershed organizations"];

		users.forEach(function (user) {
			if (user.name === localStorage.getItem("name")) {
				userLoggedIn = user;
			}
		});

		function parseUsers(data) {
			users = JSON.parse(data);
			var userTab = document.getElementById("userTab");
			var settingsHeader = document.getElementById("settingsHeader");
			settingsHeader.textContent = 'Settings - ' + localStorage.getItem("name");
			userTab.textContent = localStorage.getItem("name");
			userTab.visibility = "visible";
		}

		function parseLocations(data) {
			//locations = JSON.parse(data);
		}

		function logout() {

		}

		document.getElementById("logout").addEventListener("click", logout);

		$(document).ready(function () {
			$.ajax({
				type: "GET",
				url: "res/inwater.csv",
				dataType: "text",
				success: function (data) {
					parseLocations(data);
				}
			});

			$.ajax({
				type: "GET",
				url: "res/.users.json",
				dataType: "text",
				success: function (data) {
					parseUsers(data);
				}
			});
		});

	</script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

</body>
</html>